{"version":3,"sources":["useOverflowContainer.js"],"sourcesContent":["import * as React from 'react';\nimport { createOverflowManager } from '@fluentui/priority-overflow';\nimport { canUseDOM, useEventCallback, useIsomorphicLayoutEffect } from '@fluentui/react-utilities';\nimport { DATA_OVERFLOWING, DATA_OVERFLOW_DIVIDER, DATA_OVERFLOW_ITEM, DATA_OVERFLOW_MENU } from './constants';\n/**\n * @internal\n * @param update - Callback when overflow state changes\n * @param options - Options to configure the overflow container\n * @returns - ref to attach to an intrinsic HTML element and imperative functions\n */ export const useOverflowContainer = (update, options)=>{\n    const { overflowAxis, overflowDirection, padding, minimumVisible, onUpdateItemVisibility } = options;\n    // DOM ref to the overflow container element\n    const containerRef = React.useRef(null);\n    const updateOverflowItems = useEventCallback(update);\n    const [overflowManager] = React.useState(()=>canUseDOM() ? createOverflowManager() : null);\n    useIsomorphicLayoutEffect(()=>{\n        if (!containerRef.current) {\n            return;\n        }\n        if (overflowManager) {\n            overflowManager.observe(containerRef.current, {\n                overflowDirection: overflowDirection !== null && overflowDirection !== void 0 ? overflowDirection : 'end',\n                overflowAxis: overflowAxis !== null && overflowAxis !== void 0 ? overflowAxis : 'horizontal',\n                padding: padding !== null && padding !== void 0 ? padding : 10,\n                minimumVisible: minimumVisible !== null && minimumVisible !== void 0 ? minimumVisible : 0,\n                onUpdateItemVisibility: onUpdateItemVisibility !== null && onUpdateItemVisibility !== void 0 ? onUpdateItemVisibility : ()=>undefined,\n                onUpdateOverflow: updateOverflowItems !== null && updateOverflowItems !== void 0 ? updateOverflowItems : ()=>undefined\n            });\n            return ()=>{\n                overflowManager.disconnect();\n            };\n        }\n    }, [\n        updateOverflowItems,\n        overflowManager,\n        overflowDirection,\n        overflowAxis,\n        padding,\n        minimumVisible,\n        onUpdateItemVisibility\n    ]);\n    const registerItem = React.useCallback((item)=>{\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.addItem(item);\n        item.element.setAttribute(DATA_OVERFLOW_ITEM, '');\n        return ()=>{\n            item.element.removeAttribute(DATA_OVERFLOWING);\n            item.element.removeAttribute(DATA_OVERFLOW_ITEM);\n            overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.removeItem(item.id);\n        };\n    }, [\n        overflowManager\n    ]);\n    const registerDivider = React.useCallback((divider)=>{\n        const el = divider.element;\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.addDivider(divider);\n        el && el.setAttribute(DATA_OVERFLOW_DIVIDER, '');\n        return ()=>{\n            divider.groupId && (overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.removeDivider(divider.groupId));\n            el.removeAttribute(DATA_OVERFLOW_DIVIDER);\n        };\n    }, [\n        overflowManager\n    ]);\n    const updateOverflow = React.useCallback(()=>{\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.update();\n    }, [\n        overflowManager\n    ]);\n    const registerOverflowMenu = React.useCallback((el)=>{\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.addOverflowMenu(el);\n        el.setAttribute(DATA_OVERFLOW_MENU, '');\n        return ()=>{\n            overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.removeOverflowMenu();\n            el.removeAttribute(DATA_OVERFLOW_MENU);\n        };\n    }, [\n        overflowManager\n    ]);\n    return {\n        containerRef,\n        registerItem,\n        updateOverflow,\n        registerOverflowMenu,\n        registerDivider\n    };\n};\nexport const updateVisibilityAttribute = ({ item, visible })=>{\n    if (visible) {\n        item.element.removeAttribute(DATA_OVERFLOWING);\n    } else {\n        item.element.setAttribute(DATA_OVERFLOWING, '');\n    }\n};\n"],"names":["useOverflowContainer","updateVisibilityAttribute","update","options","overflowAxis","overflowDirection","padding","minimumVisible","onUpdateItemVisibility","containerRef","React","useRef","updateOverflowItems","useEventCallback","overflowManager","useState","canUseDOM","createOverflowManager","useIsomorphicLayoutEffect","current","observe","undefined","onUpdateOverflow","disconnect","registerItem","useCallback","item","addItem","element","setAttribute","DATA_OVERFLOW_ITEM","removeAttribute","DATA_OVERFLOWING","removeItem","id","registerDivider","divider","el","addDivider","DATA_OVERFLOW_DIVIDER","groupId","removeDivider","updateOverflow","registerOverflowMenu","addOverflowMenu","DATA_OVERFLOW_MENU","removeOverflowMenu","visible"],"mappings":"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"}